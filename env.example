# Configuration MusicBrainz Docker Officiel pour KPI Analysis
# Version: v30
# Date: 2025-10-11
# Instructions: Copier ce fichier vers .env et ajuster selon vos besoins

# ==============================================================================
# Database Configuration
# ==============================================================================
MB_DB_NAME=musicbrainz_db
MB_DB_USER=musicbrainz
MB_DB_PASSWORD=musicbrainz
MB_DB_PORT=5432

# ==============================================================================
# MusicBrainz Configuration
# ==============================================================================
# Download latest MusicBrainz data automatically
MB_DOWNLOAD_LATEST=1

# Download mirror (default: official)
MB_DOWNLOAD_MIRROR=https://data.musicbrainz.org

# Use proxy for downloads (0=no, 1=yes)
MB_USE_PROXY=0

# Number of server processes (adjust based on CPU cores)
MB_SERVER_PROCESSES=4

# ==============================================================================
# PostgreSQL Performance Tuning
# ==============================================================================
# Adjust these values based on your system resources
# Current configuration: Optimized for 8GB RAM, 4 CPU cores

# Shared buffers (25% of total RAM recommended)
POSTGRES_SHARED_BUFFERS=2GB

# Effective cache size (50-75% of total RAM)
POSTGRES_EFFECTIVE_CACHE_SIZE=4GB

# Work memory (RAM / max_connections)
POSTGRES_WORK_MEM=256MB

# Maintenance work memory (for VACUUM, CREATE INDEX)
POSTGRES_MAINTENANCE_WORK_MEM=1GB

# Max connections
POSTGRES_MAX_CONNECTIONS=100

# ==============================================================================
# KPI Schema Configuration
# ==============================================================================
KPI_SCHEMA=allfeat_kpi

# ==============================================================================
# Notes
# ==============================================================================
# - First import will take 2-6 hours depending on hardware
# - Database size: ~80GB (including indexes)
# - RAM requirement: 8GB minimum (16GB recommended)
# - Storage: 100GB free space recommended
#
# Monitor import progress:
#   docker compose logs -f musicbrainz-db
#
# Check database status:
#   docker exec musicbrainz-db psql -U musicbrainz -d musicbrainz_db -c "SELECT version();"
